{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/issue.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction StaffDashboardComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"div\")(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\")(8, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function StaffDashboardComponent_div_18_Template_button_click_8_listener() {\n      const it_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.take(it_r2));\n    });\n    i0.ɵɵtext(9, \"Take\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const it_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(it_r2.category);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", it_r2.sector, \" \\u00B7 \", it_r2.description, \"\");\n  }\n}\nfunction StaffDashboardComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 13)(2, \"div\")(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\")(8, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function StaffDashboardComponent_div_23_Template_button_click_8_listener() {\n      const it_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.resolve(it_r5));\n    });\n    i0.ɵɵtext(9, \"Resolve\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const it_r5 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(it_r5.category);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", it_r5.sector, \" \\u00B7 \", it_r5.description, \"\");\n  }\n}\nfunction StaffDashboardComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const it_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(it_r6.category);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", it_r6.sector, \" \\u00B7 \", it_r6.description, \"\");\n  }\n}\nexport let StaffDashboardComponent = /*#__PURE__*/(() => {\n  class StaffDashboardComponent {\n    constructor(issues) {\n      this.issues = issues;\n      this.sector = 'CabinCrew';\n      this.category = '';\n      this.description = '';\n      this.red = [];\n      this.yellow = [];\n      this.green = [];\n    }\n    ngOnInit() {\n      this.refresh();\n    }\n    refresh() {\n      this.issues.list({}).subscribe(list => {\n        this.red = list.filter(i => i.status === 'red');\n        this.yellow = list.filter(i => i.status === 'yellow');\n        this.green = list.filter(i => i.status === 'green');\n      });\n    }\n    report() {\n      this.issues.report({\n        sector: this.sector,\n        category: this.category,\n        description: this.description,\n        flow: 'staff'\n      }).subscribe(() => this.refresh());\n    }\n    take(it) {\n      this.issues.take(it._id).subscribe(() => this.refresh());\n    }\n    resolve(it) {\n      this.issues.resolve(it._id).subscribe(() => this.refresh());\n    }\n    static {\n      this.ɵfac = function StaffDashboardComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || StaffDashboardComponent)(i0.ɵɵdirectiveInject(i1.IssueService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: StaffDashboardComponent,\n        selectors: [[\"app-staff-dashboard\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 29,\n        vars: 6,\n        consts: [[1, \"grid\", \"columns-3\"], [1, \"card\", 2, \"padding\", \"16px\"], [2, \"display\", \"flex\", \"gap\", \"8px\", \"flex-direction\", \"column\"], [1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"placeholder\", \"Category e.g. Passenger Misconduct\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"rows\", \"3\", \"placeholder\", \"Describe the issue\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"button\", \"primary\", 3, \"click\"], [1, \"sep\"], [1, \"flex-col\"], [\"class\", \"issue red\", \"style\", \"margin-bottom:8px\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"issue yellow\", \"style\", \"margin-bottom:8px\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"issue green\", \"style\", \"margin-bottom:8px\", 4, \"ngFor\", \"ngForOf\"], [1, \"issue\", \"red\", 2, \"margin-bottom\", \"8px\"], [2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"gap\", \"8px\", \"align-items\", \"center\"], [2, \"opacity\", \".8\"], [1, \"button\", 3, \"click\"], [1, \"issue\", \"yellow\", 2, \"margin-bottom\", \"8px\"], [1, \"issue\", \"green\", 2, \"margin-bottom\", \"8px\"]],\n        template: function StaffDashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\");\n            i0.ɵɵtext(3, \"Report (Red)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"select\", 3);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function StaffDashboardComponent_Template_select_ngModelChange_5_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.sector, $event) || (ctx.sector = $event);\n              return $event;\n            });\n            i0.ɵɵelementStart(6, \"option\");\n            i0.ɵɵtext(7, \"CabinCrew\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"option\");\n            i0.ɵɵtext(9, \"Sanitation\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"option\");\n            i0.ɵɵtext(11, \"Security\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"input\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function StaffDashboardComponent_Template_input_ngModelChange_12_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.category, $event) || (ctx.category = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"textarea\", 5);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function StaffDashboardComponent_Template_textarea_ngModelChange_13_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.description, $event) || (ctx.description = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function StaffDashboardComponent_Template_button_click_14_listener() {\n              return ctx.report();\n            });\n            i0.ɵɵtext(15, \"Report\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(16, \"hr\", 7);\n            i0.ɵɵelementStart(17, \"div\", 8);\n            i0.ɵɵtemplate(18, StaffDashboardComponent_div_18_Template, 10, 3, \"div\", 9);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(19, \"div\", 1)(20, \"h3\");\n            i0.ɵɵtext(21, \"In Progress (Yellow)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"div\", 8);\n            i0.ɵɵtemplate(23, StaffDashboardComponent_div_23_Template, 10, 3, \"div\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(24, \"div\", 1)(25, \"h3\");\n            i0.ɵɵtext(26, \"Resolved (Green)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"div\", 8);\n            i0.ɵɵtemplate(28, StaffDashboardComponent_div_28_Template, 5, 3, \"div\", 11);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.sector);\n            i0.ɵɵadvance(7);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.category);\n            i0.ɵɵadvance();\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.description);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngForOf\", ctx.red);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngForOf\", ctx.yellow);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngForOf\", ctx.green);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, FormsModule, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n        encapsulation: 2\n      });\n    }\n  }\n  return StaffDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}