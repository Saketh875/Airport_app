{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/issue.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction PassengerDashboardComponent_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cat_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(cat_r1);\n  }\n}\nfunction PassengerDashboardComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 22);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 23);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 24);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 25);\n    i0.ɵɵtext(11, \"Status: Being addressed by staff\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const it_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(it_r2.category);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"sos\", it_r2.priority === \"sos\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(it_r2.priority === \"sos\" ? \"SOS\" : \"Normal\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", it_r2.sector, \" \\u00B7 \", it_r2.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Reported: \", ctx_r2.formatDate(it_r2.createdAt), \"\");\n  }\n}\nfunction PassengerDashboardComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \"No issues currently being addressed\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PassengerDashboardComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 21)(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 22);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 23);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 24);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 25);\n    i0.ɵɵtext(11, \"\\u2705 Issue has been resolved\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const it_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(it_r4.category);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"sos\", it_r4.priority === \"sos\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(it_r4.priority === \"sos\" ? \"SOS\" : \"Normal\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", it_r4.sector, \" \\u00B7 \", it_r4.description, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Resolved: \", ctx_r2.formatDate(it_r4.updatedAt), \"\");\n  }\n}\nfunction PassengerDashboardComponent_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \"No resolved issues yet\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let PassengerDashboardComponent = /*#__PURE__*/(() => {\n  class PassengerDashboardComponent {\n    constructor(issues) {\n      this.issues = issues;\n      this.sector = 'Boarding';\n      this.category = '';\n      this.description = '';\n      this.red = [];\n      this.yellow = [];\n      this.green = [];\n      this.categories = [];\n      this.sectorCategories = {\n        'Boarding': ['Boarding pass issues', 'Lack of clear guidance', 'Misunderstanding of regulations', 'Restroom availability', 'Gate confusion', 'Seating problems'],\n        'Food': ['Unhygienic food conditions', 'Substandard beverages', 'Food poisoning concerns', 'Allergy information missing', 'Overpriced items', 'Poor service quality'],\n        'Arrivals': ['Luggage misplacement', 'Luggage damage', 'Excessive checkout waiting', 'Immigration delays', 'Customs issues', 'Transportation problems']\n      };\n    }\n    ngOnInit() {\n      this.updateCategories();\n      this.refresh();\n    }\n    updateCategories() {\n      this.categories = this.sectorCategories[this.sector] || [];\n      if (this.categories.length > 0) {\n        this.category = this.categories[0];\n      }\n    }\n    refresh() {\n      this.issues.list({}).subscribe(list => {\n        this.red = list.filter(i => i.status === 'red' && i.flow === 'passenger');\n        this.yellow = list.filter(i => i.status === 'yellow' && i.flow === 'passenger');\n        this.green = list.filter(i => i.status === 'green' && i.flow === 'passenger');\n      });\n    }\n    report() {\n      if (!this.description.trim()) return;\n      this.issues.report({\n        sector: this.sector,\n        category: this.category,\n        description: this.description,\n        flow: 'passenger'\n      }).subscribe({\n        next: () => {\n          this.description = '';\n          this.refresh();\n          alert('Issue reported successfully! You can track its progress here.');\n        },\n        error: () => alert('Failed to report issue. Please try again.')\n      });\n    }\n    formatDate(date) {\n      return new Date(date).toLocaleString();\n    }\n    static {\n      this.ɵfac = function PassengerDashboardComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PassengerDashboardComponent)(i0.ɵɵdirectiveInject(i1.IssueService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PassengerDashboardComponent,\n        selectors: [[\"app-passenger-dashboard\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 41,\n        vars: 9,\n        consts: [[1, \"dashboard-header\"], [1, \"subtitle\"], [1, \"grid\", \"columns-3\"], [1, \"card\"], [1, \"form-section\"], [1, \"input\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"Boarding\"], [\"value\", \"Food\"], [\"value\", \"Arrivals\"], [1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"rows\", \"4\", \"placeholder\", \"Describe your issue in detail...\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"button\", \"primary\", 3, \"click\", \"disabled\"], [1, \"issues-list\"], [\"class\", \"issue yellow\", \"style\", \"margin-bottom:12px\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [\"class\", \"issue green\", \"style\", \"margin-bottom:12px\", 4, \"ngFor\", \"ngForOf\"], [1, \"help-section\"], [\"routerLink\", \"/portal\", 1, \"button\", \"primary\"], [3, \"value\"], [1, \"issue\", \"yellow\", 2, \"margin-bottom\", \"12px\"], [1, \"issue-header\"], [1, \"priority-badge\"], [1, \"issue-details\"], [1, \"issue-meta\"], [1, \"status-info\"], [1, \"empty-state\"], [1, \"issue\", \"green\", 2, \"margin-bottom\", \"12px\"]],\n        template: function PassengerDashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Passenger Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"p\", 1);\n            i0.ɵɵtext(4, \"Report issues and track their resolution status\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(5, \"div\", 2)(6, \"div\", 3)(7, \"h3\");\n            i0.ɵɵtext(8, \"\\uD83D\\uDD34 Report New Issue (Red)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"div\", 4)(10, \"select\", 5);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PassengerDashboardComponent_Template_select_ngModelChange_10_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.sector, $event) || (ctx.sector = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function PassengerDashboardComponent_Template_select_change_10_listener() {\n              return ctx.updateCategories();\n            });\n            i0.ɵɵelementStart(11, \"option\", 6);\n            i0.ɵɵtext(12, \"Boarding\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"option\", 7);\n            i0.ɵɵtext(14, \"Food & Beverages\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"option\", 8);\n            i0.ɵɵtext(16, \"Arrivals\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"select\", 9);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PassengerDashboardComponent_Template_select_ngModelChange_17_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.category, $event) || (ctx.category = $event);\n              return $event;\n            });\n            i0.ɵɵtemplate(18, PassengerDashboardComponent_option_18_Template, 2, 2, \"option\", 10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"textarea\", 11);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PassengerDashboardComponent_Template_textarea_ngModelChange_19_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.description, $event) || (ctx.description = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"button\", 12);\n            i0.ɵɵlistener(\"click\", function PassengerDashboardComponent_Template_button_click_20_listener() {\n              return ctx.report();\n            });\n            i0.ɵɵtext(21, \"Report Issue\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(22, \"div\", 3)(23, \"h3\");\n            i0.ɵɵtext(24, \"\\uD83D\\uDFE1 Issues In Progress (Yellow)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"div\", 13);\n            i0.ɵɵtemplate(26, PassengerDashboardComponent_div_26_Template, 12, 7, \"div\", 14)(27, PassengerDashboardComponent_div_27_Template, 2, 0, \"div\", 15);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(28, \"div\", 3)(29, \"h3\");\n            i0.ɵɵtext(30, \"\\uD83D\\uDFE2 Resolved Issues (Green)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"div\", 13);\n            i0.ɵɵtemplate(32, PassengerDashboardComponent_div_32_Template, 12, 7, \"div\", 16)(33, PassengerDashboardComponent_div_33_Template, 2, 0, \"div\", 15);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(34, \"div\", 17)(35, \"h3\");\n            i0.ɵɵtext(36, \"Need Immediate Help?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(37, \"p\");\n            i0.ɵɵtext(38, \"For urgent issues requiring immediate attention, please use the Portal SOS feature or contact airport staff directly.\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(39, \"button\", 18);\n            i0.ɵɵtext(40, \"Go to Portal SOS\");\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.sector);\n            i0.ɵɵadvance(7);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.category);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n            i0.ɵɵadvance();\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.description);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", !ctx.description.trim());\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngForOf\", ctx.yellow);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.yellow.length === 0);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngForOf\", ctx.green);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.green.length === 0);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, FormsModule, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n        encapsulation: 2\n      });\n    }\n  }\n  return PassengerDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}